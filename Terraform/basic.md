# ☁️ Terraform Overview — Infrastructure as Code (IaC)

---

## 🚀 Introduction

- Automate and manage your **infrastructure, platform, and services** that run on that platform.  
- **Terraform** is **open source** and allows you to define infrastructure as code.

---

## 🧩 Terraform is Declarative

### 🆚 Declarative vs Imperative

| Approach | Description |
|-----------|--------------|
| **Declarative** | Define **what end result** you want. |
| **Imperative** | Define **exact steps** for how to achieve it. |

When creating infrastructure, both approaches seem similar, but they differ significantly during **updates**.

**Example:**  
Updating a server count from 5 to 7, adding firewalls and other security configurations.

- **Imperative:** Write condition-based logic to update infrastructure as needed.  
- **Declarative:** Just define the desired state (7 servers, firewall, etc.). Terraform automatically compares with the current state and performs the required updates.

### ✅ Advantages of Declarative Files

- Adjust old config file and re-execute easily.  
- Clean and minimal configuration files.  
- Always know the current setup by reviewing the config file.

---

## 🏗️ Terraform for Infrastructure Provisioning

Terraform is primarily a **tool for infrastructure provisioning**.

- Before deploying a web application, Terraform ensures the required infrastructure is ready.  
- It can:  
  - Create **VPCs**  
  - Spin up **servers**  
  - Install **Docker**  
  - Create **AWS users and permissions** — all in the correct order.

---

## ⚖️ How Terraform is Different from Ansible

| Feature | **Terraform** | **Ansible** |
|----------|----------------|--------------|
| **Category** | Infrastructure as Code | Infrastructure as Code |
| **Primary Purpose** | Infrastructure provisioning tool (better for provisioning) | Configuration management tool |
| **App Deployment** | Can deploy apps | Can configure and deploy apps |
| **Capabilities** | - Create servers<br>- Manage infrastructure | - Configure systems<br>- Deploy software<br>- Update installed applications |
| **Maturity** | Relatively new | More mature |
| **Orchestration** | More advanced | Moderate |
| **Best Use Case** | Infrastructure provisioning | Configuration management |

> Terraform is **better for provisioning**, while Ansible is **better for configuration**.

---

## 🔄 Benefits of Terraform

- Easy to **modify infrastructure** after it’s created.  
- Automate **continuous changes** to infrastructure.  
- Easy to **replicate infrastructure** — useful for cloning Dev environments to production.

---

## ⚙️ How Terraform Works with Cloud Providers (AWS, Google, Microsoft)

Terraform connects to infrastructure providers using **two main components**:

### 1️⃣ Terraform Core Components

- **TF Configuration:** Code defining what you want (desired state).  
- **State File:** Auto-generated by Terraform; stores current infrastructure state.

Terraform Core compares **State vs Config File** each time and determines **what to create, update, or delete**, in the correct order.

---

### 2️⃣ Providers

Terraform supports multiple **providers**:

1. **IaaS Providers:** AWS, Azure, Google Cloud  
2. **PaaS Providers:** Kubernetes, Heroku, etc.  
3. **SaaS Providers:** Fastly, Datadog, GitHub, etc.

> With over **100 providers**, Terraform allows users to provision, deploy, and manage infrastructure and services seamlessly.

---

## 💻 Example: Terraform Configuration File

### AWS Example
```hcl
# Configure the AWS Provider
provider "aws" {
  version = "~> 2.0"
  region  = "us-east-1"
}

# Create a VPC
resource "aws_vpc" "example" {
  cidr_block = "10.0.0.0/16"
}
```

---

## 🧠 Terraform Commands

| Command | Description |
|----------|--------------|
| **Refresh** | Queries the infrastructure provider to get the current state. |
| **Plan** | Creates an execution plan — just a preview, no real changes. |
| **Apply** | Executes the plan to create/update resources. |
| **Destroy** | Destroys resources/infrastructure — creates a plan to remove running components. |

---

✅ **Summary**

- Terraform automates infrastructure management through a **declarative** approach.  
- Works across **multi-cloud** environments (AWS, Azure, GCP, etc.).  
- Uses providers to connect and manage all types of infrastructure (IaaS, PaaS, SaaS).  
- Core commands: `plan`, `apply`, `destroy`.

